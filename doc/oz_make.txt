*oz_make.txt*  Improved make integration for oz-nvim.

==============================================================================
INTRODUCTION                                                *oz-make-intro*

The Make module of oz-nvim provides an asynchronous replacement for the
builtin `:make` command. it includes automatic build system detection,
per-project `makeprg` caching, and an automatic "AutoMake" feature.

==============================================================================
COMMANDS                                                    *oz-make-commands*

:Make [args]                                                *:Make*
:Make! [args]                                               *:Make!*
    Asynchronously executes the `makeprg`.
    - By default, runs from the project root.
    - Using `!` runs from the current working directory.
    - Automatically detects build systems (Makefile, Cargo, npm, etc.) if
      local makeprg is empty.
    - Populates the quickfix list with errors and warnings.
    - If a build fails (non-zero exit code) and no quickfix entries are
      found, the output window is displayed.

:MakeKill                                                   *:MakeKill*
    Kills the currently running `:Make` job.

:AutoMake [action]                                          *:AutoMake*
    Toggles an automatic `:Make` execution when files are saved.
    Actions:
    - `file`: Watches the current file only.
    - `filetype`: Watches all files of the current filetype.
    - `addarg`: Prompts for arguments to pass to the `:Make` command.
    - `disable`: Stops the current AutoMake watcher.

==============================================================================
KEYMAPS                                                     *oz-make-keymaps*

Transient Keymaps                                           *oz-make-transient*
-----------------
While a build job is running, these keys are available globally to manage
the active process. They are automatically cleared once the build finishes.

    <C-x>       Kill the currently running build job.
    <C-d>       Toggle the build output window to see progress in real-time.

Output Window Keymaps                                       *oz-make-out-win*
---------------------
When the build output window (`makeout_win`) is opened, the following
keymaps are available within that buffer:

    <Enter>     Jump to the file and line under the cursor(less powerfull).
    q           Close the output window.
    t           Run the full build command in a terminal (using `oz.term`).
    A           Add/Save a custom Error Format (EFM) for the current
                filetype or project. This is useful when the build output
                is not being correctly parsed into the quickfix list.
    g?          Show all available keymaps.

==============================================================================
CONFIGURATION                                               *oz-make-config*

The Make module can be configured via the `oz_make` table in `setup()`:

    - override_make: If true, redirects the default `:make` to `:Make`.
    - autosave_makeprg: Automatically saves and restores the `makeprg`
      setting on a per-project basis.
    - transient_mappings: Temporary keymaps active only while a build job
      is running.
        - `kill_job`: Key to kill the running job (Default: `<C-x>`).
        - `toggle_output`: Key to toggle the build output window (Default: `<C-d>`).

Example configuration:
>lua
    oz_make = {
        override_make = false,
        autosave_makeprg = true,
        transient_mappings = {
            kill_job = "<C-x>",
            toggle_output = "<C-d>",
        },
    }
<

==============================================================================
ERROR FORMATS                                               *oz-make-efm*

oz-nvim includes default error formats for many languages. You can override
or add new ones using the `A` keymap in the output window. Custom EFMs are
cached per-project or per-filetype.


vim:tw=78:ts=8:noet:ft=help:norl:
