local M = {}
local u = require("oz.mappings.util")
local util = require("oz.util")

local function compile_mode_buf_mappings(config)
	-- compilation to term
	util.Map("n", config.mappings.open_in_oz_term, function()
		vim.cmd("CompileInterrupt")
		vim.cmd("close")
		u.cmd_func("Term")
	end, { buffer = 0, silent = true, desc = "open in oz_term" })

	-- show keymaps
	util.Map("n", config.mappings.show_keybinds, function()
		util.Show_buf_keymaps({ subtext = { "~ generated by oz" } })
	end, { buffer = 0, silent = true, desc = "show all keymaps" })
end

-- compile-mode init
function M.compile_init(config)
    -- compile-mode specific mappings init
    compile_mode_buf_mappings(config)
end

return M
